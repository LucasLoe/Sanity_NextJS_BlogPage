{"version":3,"file":"SanityTutorials.js","names":["FeedItem","feedItem","isEmpty","title","guideOrTutorial","externalLink","feedItems","subtitle","description","createUrl","slug","_type","hasVideo","poster","urlBuilder","image","height","url","undefined","dataAdapter","getFeed","type","current","SanityTutorials","React","Component","componentDidMount","templateRepoId","props","subscription","subscribe","response","setState","items","componentWillUnmount","unsubscribe","render","state","sections","filter","i","columns","length","map","section","sectionItems","_id","item","PropTypes","string"],"sources":["../../../src/widgets/sanityTutorials/SanityTutorials.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Flex, Grid, Stack, Heading, Container, Card, Text, Button} from '@sanity/ui'\nimport Tutorial from './Tutorial'\nimport dataAdapter from './dataAdapter'\n\nconst FeedItem = ({feedItem}) => {\n  // Check to see if the feed item has the content needed to render an item with a link and poster image\n  const isEmpty =\n    !feedItem.title || (!feedItem.guideOrTutorial && !feedItem.externalLink && !feedItem.feedItems)\n\n  if (isEmpty) {\n    return null\n  }\n  const subtitle = feedItem.description\n  const {guideOrTutorial = {}} = feedItem\n  return (\n    <Tutorial\n      title={feedItem.title}\n      href={createUrl(guideOrTutorial.slug, guideOrTutorial._type) || feedItem.externalLink}\n      presenterSubtitle={subtitle}\n      showPlayIcon={feedItem.hasVideo}\n      posterURL={feedItem.poster ? urlBuilder.image(feedItem.poster).height(360).url() : undefined}\n    />\n  )\n}\n\nconst {urlBuilder, getFeed} = dataAdapter\n\nfunction createUrl(slug, type) {\n  if (type === 'tutorial') {\n    return `https://www.sanity.io/docs/tutorials/${slug.current}`\n  } else if (type === 'guide') {\n    return `https://www.sanity.io/docs/guides/${slug.current}`\n  }\n  return false\n}\n\nclass SanityTutorials extends React.Component {\n  static propTypes = {\n    templateRepoId: PropTypes.string,\n  }\n\n  static defaultProps = {\n    templateRepoId: null,\n  }\n\n  state = {\n    feedItems: [],\n  }\n\n  componentDidMount() {\n    const {templateRepoId} = this.props\n    this.subscription = getFeed(templateRepoId).subscribe((response) => {\n      this.setState({\n        title: response.title,\n        feedItems: response.items,\n      })\n    })\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) {\n      this.subscription.unsubscribe()\n    }\n  }\n\n  render() {\n    const {title = 'Learn about Sanity', feedItems} = this.state\n\n    // Filter out items and sections for layout purposes\n    const sections = feedItems.filter((i) => i._type === 'feedSection')\n    const items = feedItems.filter((i) => i._type === 'feedItem')\n\n    const columns = (length) => (length < 4 ? [1, 2, 3] : [1, 2, 3, 4])\n\n    return (\n      <Container width={4}>\n        <Stack space={6} paddingBottom={4}>\n          <Card\n            tone=\"primary\"\n            padding={4}\n            radius={2}\n            border\n            marginTop={4}\n            data-name=\"sanity-tutorials-widget-docs-link\"\n          >\n            <Flex direction={['column', 'column', 'row']}>\n              <Stack space={4} flex={1} paddingRight={[0, 0, 4]}>\n                <Heading as=\"h2\">Getting started guide</Heading>\n                <Text as=\"p\">\n                  {`It's time to learn how to build schemas, create content, and connect it to other\n                  applications.`}\n                </Text>\n              </Stack>\n              <Flex paddingTop={[4, 4, 0]} align=\"center\">\n                <Stack flex={1}>\n                  <Button\n                    paddingY={3}\n                    paddingX={5}\n                    tone=\"primary\"\n                    as=\"a\"\n                    target=\"_blank\"\n                    href=\"https://www.sanity.io/docs?ref=studio-dashboard\"\n                    text=\"Go to docs\"\n                  />\n                </Stack>\n              </Flex>\n            </Flex>\n          </Card>\n          {sections &&\n            sections?.length > 0 &&\n            sections.map((section) => {\n              return (\n                section?.sectionItems && (\n                  <Stack space={4} key={section._id}>\n                    <Heading>{section.title}</Heading>\n                    <Grid\n                      as=\"ul\"\n                      columns={columns(section?.sectionItems?.length)}\n                      gap={4}\n                      data-name=\"sanity-dashboard-widget-tutorials-section\"\n                    >\n                      {section?.sectionItems.map((item) => (\n                        <Flex as=\"li\" key={item._id}>\n                          <FeedItem feedItem={item} />\n                        </Flex>\n                      ))}\n                    </Grid>\n                  </Stack>\n                )\n              )\n            })}\n          {items && items.length > 0 && (\n            <Stack space={4}>\n              <Heading>{title}</Heading>\n              <Grid as=\"ul\" columns={columns(items?.length)} gap={4}>\n                {items.map((feedItem) => (\n                  <Flex as=\"li\" key={feedItem._id}>\n                    <FeedItem feedItem={feedItem} />\n                  </Flex>\n                ))}\n              </Grid>\n            </Stack>\n          )}\n        </Stack>\n      </Container>\n    )\n  }\n}\n\nexport default SanityTutorials\n"],"mappings":"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"}